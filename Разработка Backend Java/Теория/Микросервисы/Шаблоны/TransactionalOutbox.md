**Требование**: сохранить данные в БД и доставить брокеру сообщение об этом.

**Сценарий**: 
- в рамках транзакции после изменения данных в БД, отправляем событие в брокер. 
- данные в БД сохранили; сообщение доставили в брокер, однако в ответ пришла ошибка из-за неполадок сети. 

**Проблема**: транзакция откатывает данные из-за ошибки при отправке брокеру, однако сообщение брокеру уже доставлено. В результате возникает неконсистентность данных.

**Решение**: создать таблицу *outbox*, в которую делать запись примерно такого вида:

| id  | value | sent (bool) |
| :-: | :---: | :---------: |

В другом сервисе необходимо запустить воркер, который периодически будет читать данные с `sent == false` и отправлять их в брокер.
