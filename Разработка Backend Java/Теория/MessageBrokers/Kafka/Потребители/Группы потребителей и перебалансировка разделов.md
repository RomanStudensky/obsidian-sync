
![[Pasted image 20250625123647.png]]

Перебалансировка происходит при изменении кол-ва подписавшихся потребителей.

Существует 2 варианта перебалансировки:

- Безотлагательная перебалансировка. Все потребители прекращают потребление, отказываются от своих прав владения разделами и переподключаются к группе. (некоторое время недоступна вся группа потребителей)
- Совместная перебалансировка. Переназначение небольшого множества разделов от одного потребителя к другому и позволяет потребителям продолжить обработку записей из всех разделов, которые не были переназначены

Поддержание принадлежности членства к группе поддерживается периодическими контрольными сигналами (heartbeats). Их посылает фоновый поток потребителя.

Если потребитель перестал отправлять сигналы, время его сеанса истекает, координатор признает его неработоспособным.

session.timeout.ms – параметр определяющий время, по истечении которого слушатель считается неактивным. Слишком низкое значение приведет к быстрой перебалансировке, большое значение приведет к длительному простою