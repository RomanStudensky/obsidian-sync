![[Pasted image 20250202194024.png]]![[Pasted image 20250202194028.png]]
***Native Memory*** — вся доступная системная память.

**Heap** (куча) — объекты и статические переменные. Это общее место для всех потоков приложения. Содержит все объекты, созданные в вашем приложении, независимо от того, какой поток создал их.  
Переменные обьекта – в heap, вместе с объектом.  
Статические переменные - в heap, вместе с классом.

К объектам в *heap* могут обращаться потоки, у которых есть ссылка. Если два потока вызывают метод для одного и того же объекта одновременно, каждый поток будет иметь свою собственную копию локальных переменных.  
Размер памяти настраивается  *-**Xms** (минимальный размер) и -**Xmx** (максимальный размер)*.  
**Eden, S0, S1, Old Generation** – Подробнее в главе “Cборка мусора” ниже.  
**Thread Stack**  — локальные переменные и стек вызова методов(какие методы вызвал поток).  
- локальная переменная из методов в объекте – в stack, сам объект в heap.  
- локальная переменная ссылка на объект – в stack, сам объект в heap.  
- локальные переменные примитивных типов – в stack и не видны другим потокам. 

Каждый поток имеет доступ только к единственному своему stack.  
Поток не может совместно использовать примитивную локальную переменную, только передать копию. Если два потока выполняют один и тот же код, они создадут свои копии локальная переменная в стеках.   
Все данные в стеке **GC roots.** Освобождается на выходе из функции.  
  
**Metaspace  с Java 8** заменяет **Permanent generation** — метаданные классов . Это пространство также является общими для всех. Так как metaspace является частью native memory, то его размер зависит от платформы. Флаг **MaxMetaspaceSize**.  
**CodeCache  — JIT-компилятор** компилирует часто исполняемый код, преобразует его в нативный-машинный код и кеширует для более быстрого выполнения.

Интерпретация – простое последовательное воспроизведение кода программы, команда за командой.