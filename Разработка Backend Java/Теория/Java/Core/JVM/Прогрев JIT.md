–ü—Ä–æ–≥—Ä–µ–≤ JIT (Just-In-Time) –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ ‚Äî —ç—Ç–æ —ç—Ç–∞–ø, –∫–æ–≥–¥–∞ JVM –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å –±–∞–π—Ç–∫–æ–¥ –≤ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–µ, –∞ –∑–∞—Ç–µ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç ¬´–≥–æ—Ä—è—á–∏–µ¬ª (—á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º—ã–µ) –º–µ—Ç–æ–¥—ã –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏.

üîπ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ–≥—Ä–µ–≤–∞:**

1. –°–Ω–∞—á–∞–ª–∞ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–µ (–º–µ–¥–ª–µ–Ω–Ω–æ).
2. JVM —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª–∏: –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ, –∫–∞–∫–∏–µ –≤–µ—Ç–∫–∏ —É—Å–ª–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è, –∫–∞–∫–∏–µ –∫–ª–∞—Å—Å—ã —Ä–µ–∞–ª—å–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã.
3. –ö–æ–≥–¥–∞ –º–µ—Ç–æ–¥ ¬´—Ä–∞–∑–æ–≥—Ä–µ–µ—Ç—Å—è¬ª (–¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –ø–æ—Ä–æ–≥–∞ –≤—ã–∑–æ–≤–æ–≤, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ~10 000 –¥–ª—è HotSpot C2), JIT –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –µ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –≤ –±—ã—Å—Ç—Ä—ã–π –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥.
4. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥.

üîπ **–ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –Ω–∞–≥—Ä—É–∑–∫–µ:**

- **–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞**: –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ä–µ–¥–Ω–µ–µ –∏ p95-latency –ø–µ—Ä–µ—Å—Ç–∞—é—Ç —É–ª—É—á—à–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö N —Å–µ–∫—É–Ω–¥/–º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã.
- **–ú–µ—Ç—Ä–∏–∫–∏ JIT**: –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ñ–ª–∞–≥–∏ JVM (`-XX:+PrintCompilation`, `-XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining`) –∏ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É–∂–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã.
- **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞—Ö (JFR, async-profiler) –¥–æ–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–¥–∞ ‚Üí —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –Ω—É–ª—é.
- **Warmup-—Ç–µ—Å—Ç—ã**: –æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–¥ –±–µ–Ω—á–º–∞—Ä–∫–∞–º–∏ (JMH, –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã) –∑–∞–ø—É—Å–∫–∞—é—Ç –ø—Ä–æ–≥–æ–Ω ¬´–≤—Ö–æ–ª–æ—Å—Ç—É—é¬ª, —á—Ç–æ–±—ã JIT —É—Å–ø–µ–ª –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–µ —É—á–∞—Å—Ç–∫–∏.

üìå –ü—Ä–∞–∫—Ç–∏–∫–∞:

- –î–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–æ–≥—Ä–µ–≤ –æ–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç **–ø–µ—Ä–≤—ã–µ 30‚Äì120 —Å–µ–∫—É–Ω–¥** –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞.
- –í –ø—Ä–æ–¥–µ —á–∞—Å—Ç–æ –¥–µ–ª–∞—é—Ç **pre-warm**: —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã JIT —É—Å–ø–µ–ª —Ä–∞–∑–æ–≥–Ω–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π.

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ **–º–µ—Ç—Ä–∏–∫–∏/—Ñ–ª–∞–≥–∏ JVM**, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –≤–∫–ª—é—á–∏—Ç—å, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–¥–∏—Ç—å –º–æ–º–µ–Ω—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏?


### üîß JVM-—Ñ–ª–∞–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ JIT

1. **–°–ø–∏—Å–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–π**

`-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation -XX:+PrintInlining`

–ü–æ–∫–∞–∂–µ—Ç, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∏ –∫–æ–≥–¥–∞. –ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–π —Å—Ç–∏—Ö–∞–µ—Ç ‚Äî –≥–æ—Ä—è—á–∏–µ –º–µ—Å—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Ç—ã.

2. **–ü–æ—Ä–æ–≥ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**

`-XX:CompileThreshold=10000`

(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–∫–æ–ª–æ 10k –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–∞). –ï—Å–ª–∏ –º–µ—Ç–æ–¥ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ JIT –µ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç.

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ JIT**

`-XX:+PrintCompilation -XX:+LogCompilation -XX:+UnlockDiagnosticVMOptions`

–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–≥ –≤ [JITWatch](https://github.com/AdoptOpenJDK/jitwatch), —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ.

---

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- **CPU usage —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è** ‚Äî –≤ –Ω–∞—á–∞–ª–µ —á–∞—Å—Ç–æ —Å–∫–∞—á–µ—Ç –∏–∑-–∑–∞ JIT.
- **GC –Ω–µ –º–µ—à–∞–µ—Ç** ‚Äî –ø—Ä–∏ –ø—Ä–æ–≥—Ä–µ–≤–µ –∏–Ω–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ª–∏—à–Ω–∏–π –º—É—Å–æ—Ä. –ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–æ–≤–Ω–æ–µ.
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞** –Ω–∞ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –ø–µ—Ä–µ—Å—Ç–∞–ª–æ —É–ª—É—á—à–∞—Ç—å—Å—è (p95/p99 latency –≤—ã—Ä–æ–≤–Ω—è–ª–∏—Å—å).
- **JFR (Java Flight Recorder)** ‚Äî –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å `-XX:StartFlightRecording=duration=60s,filename=jit.jfr` –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∫–ª–∞–¥ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ vs JIT.

---

### ‚ö° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏—ë–º

- –ó–∞–ø—É—Å–∫–∞–µ—à—å —Å–µ—Ä–≤–∏—Å ‚Üí —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å ¬´–ø—Ä–æ–≥—Ä–µ–≤–∞—é—â–∏–π¬ª —Ç—Ä–∞—Ñ–∏–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500‚Äì1000 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).
- –°–º–æ—Ç—Ä–∏—à—å –º–µ—Ç—Ä–∏–∫–∏: –∫–∞–∫ —Ç–æ–ª—å–∫–æ latency –∏ CPU –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –ø–∞–¥–∞—Ç—å ‚Äî —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≥—Ä–µ—Ç.